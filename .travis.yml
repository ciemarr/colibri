language: node_js

# https://github.com/travis-ci/travis-ci/issues/9561#issuecomment-488997608
# "node-sass currently does not work with node version 12"
node_js: 11.10.0

env:
  - CXX=g++-4.8
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - g++-4.8

cache:
  yarn: true
  directories:
    - "~/.cache"

before_install:
  - curl -o- -L https://yarnpkg.com/install.sh | bash
  - export PATH="$HOME/.yarn/bin:$PATH"
  - yarn --version

before_script:
  - yarn start &

after_success:
  - yarn run coveralls

deploy:
  provider: heroku
  app: colibri-reading-app
  api_key:
    secure: ROvi221m9Z1dIQz8bZkD47FWJqLnx2jy92sclitD5UoY8QwQ+PRWxpj1cvrUFYEDqPZ8gGkxASWSIzWXXqFq0Vz8kMH3OkZWUZvE498kenFlDLYda+FU/cx1aSYR/fiHCsIc6kbqUMgXCsBzdMtwyCMH5oYa9qeMruk4WOq73oLSe8orxCRE5s7TDZot5XloQOLIKAW5BWNOT9R1d5Ub4aXHX0arbyBkJHCzVMMNYmKNfosjUzQevOYkuFA+aT0aV0/wxP9RzlPd+Zbxe0a/F8m2bVGOdYtXZVpg48D40MXgot2IeJX0sJY3P6G1i6wMZswvnqyb1lvwDPZ/g9xgOrMr8NTYNiN4GuqXFW4XDkaL9gNBwcqMuJhUShwsITQqZZ5n5emqzIeQCJscBsUfTosT8j+O1lOK/7/zPUzEJCS8GS0pg8yAHYq3TSWErfc2wi5RTDL6JXDrAy830HDUtKmxf+I7z/plbNV50uQ5A9t+dKr7AQy2nMAwovcYgLFlaMJel9T9vIYn6ZqqGlP/qswuLelKCUb/SgEm1vlk5FUB0oyiXBnesqd7ESJmNe1QRwD0RMtdMto2wXpFBMWW/bNVQrWNi8PqPArv6lwUCUrNyqJg3bpZZO9uOhiJdu0+/+SuV+be1LkfuBYDCX7vqfNO22oZSLBLr30HMGc9Jcg=
